{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport let ProfilComponent = /*#__PURE__*/(() => {\n  class ProfilComponent {\n    constructor(userService, router) {\n      this.userService = userService;\n      this.router = router;\n      this.user = {};\n      this.sidebarOpen = true;\n      this.passwordData = {\n        oldPassword: '',\n        newPassword: '',\n        confirmPassword: ''\n      };\n    }\n\n    ngOnInit() {\n      this.userId = Number(localStorage.getItem('userId')); // ⭐ récup ID\n\n      this.loadUser(); // ⭐ charger données\n    }\n\n    loadUser() {\n      this.userService.getUserById(this.userId).subscribe({\n        next: data => {\n          this.user = data; // ⭐ charge l'utilisateur dans le form\n\n          console.log(\"Utilisateur chargé :\", this.user);\n        },\n        error: () => {\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur chargement user',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      });\n    }\n\n    update() {\n      this.userService.updateUser(this.userId, this.user).subscribe({\n        next: updatedUser => {\n          console.log(\"Profil mis à jour :\", updatedUser);\n          Swal.fire({\n            title: 'Success!',\n            text: 'Votre profil à été modifié avec succès !',\n            icon: 'success',\n            confirmButtonText: 'OK',\n            timer: 1500\n          });\n        },\n        error: () => {\n          console.error(\"Erreur lors de la mise à jour\");\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur lors de la modification',\n            showConfirmButton: false,\n            timer: 1500\n          });\n        }\n      });\n    }\n\n    logout() {\n      this.userService.logout();\n      Swal.fire({\n        icon: 'error',\n        title: 'Vous êtes deconnecté',\n        showConfirmButton: false,\n        timer: 1500\n      });\n      this.router.navigate(['/']);\n    }\n\n    updatePassword() {\n      if (this.passwordData.newPassword !== this.passwordData.confirmPassword) {\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur',\n          text: 'Les mots de passe ne correspondent pas !'\n        });\n        return;\n      }\n\n      const id = Number(localStorage.getItem(\"userId\"));\n      const body = {\n        oldPassword: this.passwordData.oldPassword,\n        newPassword: this.passwordData.newPassword\n      };\n      this.userService.changePassword(id, body).subscribe(response => {\n        Swal.fire({\n          title: 'Success!',\n          text: response.message,\n          icon: 'success',\n          confirmButtonText: 'OK',\n          timer: 1500\n        });\n      }, error => {\n        var _a;\n\n        console.error(\"Erreur API :\", error); // afficher le message renvoyé par le backend\n\n        const message = ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || \"Erreur lors de la mise à jour du mot de passe\";\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur',\n          text: message\n        });\n      });\n    }\n\n  }\n\n  ProfilComponent.ɵfac = function ProfilComponent_Factory(t) {\n    return new (t || ProfilComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  ProfilComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfilComponent,\n    selectors: [[\"app-profil\"]],\n    decls: 106,\n    vars: 2,\n    consts: [[1, \"app-container\"], [1, \"sidebar-content\"], [\"href\", \"#\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 1, \"icon\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"], [\"href\", \"actualites\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\"], [\"href\", \"formateurs\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"], [\"href\", \"evaluations\"], [\"href\", \"formationFormateur\"], [\"href\", \"serviceFormateur\"], [\"href\", \"partenaire\"], [\"href\", \"formationKeejob\"], [\"href\", \"cv\"], [\"href\", \"coaching\"], [\"href\", \"profil\"], [3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"], [\"id\", \"hero\", 1, \"hero-section\"], [1, \"container\"], [1, \"hero-form-wrapper\"], [1, \"hero-form\"], [1, \"form-group\"], [\"for\", \"prenom\"], [\"type\", \"text\", \"id\", \"prenom\", \"name\", \"username\", \"placeholder\", \"Entrez votre pr\\u00E9nom\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"placeholder\", \"votre.email@exemple.com\"], [1, \"button-container\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [\"type\", \"button\", 1, \"btn\", \"btn-cancel\"], [\"for\", \"oldPass\"], [\"type\", \"password\", \"id\", \"oldPass\", \"name\", \"oldPassword\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"], [\"for\", \"newPass\"], [\"type\", \"password\", \"id\", \"newPass\", \"name\", \"newPassword\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"], [\"for\", \"confirmPass\"], [\"type\", \"password\", \"id\", \"confirmPass\", \"name\", \"confirmPassword\", \"placeholder\", \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"]],\n    template: function ProfilComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"div\", 0)(2, \"div\")(3, \"div\", 1)(4, \"h2\");\n        i0.ɵɵtext(5, \"Admin Panel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"nav\")(7, \"a\", 2);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(8, \"svg\", 3);\n        i0.ɵɵelement(9, \"path\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(10, \"span\");\n        i0.ɵɵtext(11, \"Dashboard\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"a\", 5);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(13, \"svg\", 3);\n        i0.ɵɵelement(14, \"path\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(15, \"span\");\n        i0.ɵɵtext(16, \"Actualit\\u00E9s\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"a\", 7);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(18, \"svg\", 3);\n        i0.ɵɵelement(19, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(20, \"span\");\n        i0.ɵɵtext(21, \"Formateurs\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"a\", 9);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(23, \"svg\", 3);\n        i0.ɵɵelement(24, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(25, \"span\");\n        i0.ɵɵtext(26, \"Evaluations\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(27, \"a\", 10);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(28, \"svg\", 3);\n        i0.ɵɵelement(29, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(30, \"span\");\n        i0.ɵɵtext(31, \"Mes formations\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"a\", 11);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(33, \"svg\", 3);\n        i0.ɵɵelement(34, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(35, \"span\");\n        i0.ɵɵtext(36, \"Mes services\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(37, \"a\", 12);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(38, \"svg\", 3);\n        i0.ɵɵelement(39, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(40, \"span\");\n        i0.ɵɵtext(41, \"Partenaires\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(42, \"a\", 13);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(43, \"svg\", 3);\n        i0.ɵɵelement(44, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(45, \"span\");\n        i0.ɵɵtext(46, \"Formations Keejob\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(47, \"a\", 14);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(48, \"svg\", 3);\n        i0.ɵɵelement(49, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(50, \"span\");\n        i0.ɵɵtext(51, \"CV et Lettre de motivations\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(52, \"a\", 15);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(53, \"svg\", 3);\n        i0.ɵɵelement(54, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(55, \"span\");\n        i0.ɵɵtext(56, \"Coaching Emploi\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(57, \"a\", 16);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(58, \"svg\", 3);\n        i0.ɵɵelement(59, \"path\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(60, \"span\");\n        i0.ɵɵtext(61, \"Profile\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(62, \"a\", 17);\n        i0.ɵɵlistener(\"click\", function ProfilComponent_Template_a_click_62_listener($event) {\n          ctx.logout();\n          return $event.preventDefault();\n        });\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(63, \"svg\", 3);\n        i0.ɵɵelement(64, \"path\", 18)(65, \"path\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(66, \"span\");\n        i0.ɵɵtext(67, \"Se d\\u00E9connecter\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(68, \"section\", 20)(69, \"div\", 21)(70, \"div\", 22)(71, \"form\", 23)(72, \"div\", 24)(73, \"label\", 25);\n        i0.ɵɵtext(74, \"Pr\\u00E9nom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(75, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(76, \"div\", 24)(77, \"label\", 27);\n        i0.ɵɵtext(78, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(79, \"input\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"div\", 29)(81, \"button\", 30);\n        i0.ɵɵtext(82, \"Modifier profil\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(83, \"button\", 31);\n        i0.ɵɵtext(84, \"Annuler\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(85, \"div\", 22)(86, \"form\", 23)(87, \"h3\");\n        i0.ɵɵtext(88, \"Modifier le mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(89, \"div\", 24)(90, \"label\", 32);\n        i0.ɵɵtext(91, \"Ancien mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(92, \"input\", 33);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(93, \"div\", 24)(94, \"label\", 34);\n        i0.ɵɵtext(95, \"Nouveau mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(96, \"input\", 35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(97, \"div\", 24)(98, \"label\", 36);\n        i0.ɵɵtext(99, \"Confirmer le mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(100, \"input\", 37);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(101, \"div\", 29)(102, \"button\", 30);\n        i0.ɵɵtext(103, \"Modifier mot de passe\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(104, \"button\", 31);\n        i0.ɵɵtext(105, \"Annuler\");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassMap(ctx.sidebarOpen ? \"sidebar open\" : \"sidebar\");\n      }\n    },\n    dependencies: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.NgForm],\n    styles: [\"*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:#f9fafb;color:#333}.app-container[_ngcontent-%COMP%]{display:flex;height:100vh;background-color:#f3f4f6;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.sidebar[_ngcontent-%COMP%]{width:0;background-color:#111827;color:#fff;overflow:hidden;transition:width .3s}.sidebar.open[_ngcontent-%COMP%]{width:250px}.sidebar-content[_ngcontent-%COMP%]{padding:24px}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:2.5rem}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 15px;margin-bottom:5px;border-radius:8px;text-decoration:none;color:#d1d5db;transition:background .3s,color .3s}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#1f2937;color:#fff}header[_ngcontent-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer}.icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px}.hero-section[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-left:auto;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:40px 20px}.container[_ngcontent-%COMP%]{display:flex;gap:30px;flex-wrap:wrap}.hero-form-wrapper[_ngcontent-%COMP%]{flex:1;min-width:300px;background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:20px;padding:40px;box-shadow:0 20px 60px #0000004d;transition:transform .3s ease,box-shadow .3s ease}.hero-form-wrapper[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 25px 70px #0006}.hero-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#667eea;font-size:24px;font-weight:600;margin-bottom:25px;padding-bottom:15px;border-bottom:3px solid #667eea}.form-group[_ngcontent-%COMP%]{margin-bottom:25px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#333;font-weight:600;margin-bottom:8px;font-size:14px;text-transform:uppercase;letter-spacing:.5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:14px 18px;border:2px solid #e0e0e0;border-radius:12px;font-size:15px;transition:all .3s ease;background:#f8f9fa}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;background:white;box-shadow:0 0 0 4px #667eea1a}.button-container[_ngcontent-%COMP%]{display:flex;gap:15px;margin-top:30px}.btn[_ngcontent-%COMP%]{flex:1;padding:14px 24px;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:all .3s ease;text-transform:uppercase;letter-spacing:.5px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 15px #667eea66}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-cancel[_ngcontent-%COMP%]{background:white;color:#666;border:2px solid #e0e0e0}.btn-cancel[_ngcontent-%COMP%]:hover{background:#f8f9fa;border-color:#999;color:#333}.hero-form-wrapper[_ngcontent-%COMP%]:first-child:before{content:\\\"\\\\1f464\\\";font-size:48px;display:block;text-align:center;margin-bottom:20px}.hero-form-wrapper[_ngcontent-%COMP%]:last-child:before{content:\\\"\\\\1f512\\\";font-size:48px;display:block;text-align:center;margin-bottom:20px}@media (max-width: 768px){.container[_ngcontent-%COMP%]{flex-direction:column}.hero-form-wrapper[_ngcontent-%COMP%]{min-width:100%}.button-container[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}@keyframes fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.hero-form-wrapper[_ngcontent-%COMP%]{animation:fadeInUp .6s ease forwards}.hero-form-wrapper[_ngcontent-%COMP%]:last-child{animation-delay:.2s}\"]\n  });\n  return ProfilComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}