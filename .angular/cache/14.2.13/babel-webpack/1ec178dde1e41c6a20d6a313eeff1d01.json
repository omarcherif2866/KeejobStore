{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/logiciel.service\";\nimport * as i2 from \"src/app/services/partenaire.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction LogicielComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function LogicielComponent_div_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.openAddModal());\n    });\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 6);\n    i0.ɵɵelement(3, \"path\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Ajouter un nouveau logiciel\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction LogicielComponent_div_2_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelement(1, \"div\", 15);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Chargement des logiciels...\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LogicielComponent_div_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"p\");\n    i0.ɵɵtext(2, \"Aucun logiciel disponible. Cr\\u00E9ez-en un nouveau ci-dessus.\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LogicielComponent_div_2_div_5_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" \\u2713 \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction LogicielComponent_div_2_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20);\n    i0.ɵɵelement(2, \"img\", 21);\n    i0.ɵɵtemplate(3, LogicielComponent_div_2_div_5_div_1_div_3_Template, 2, 0, \"div\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 23);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const logiciel_r10 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"selected\", ctx_r9.isSelected(logiciel_r10));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r9.sanitizeImage(logiciel_r10.Image), i0.ɵɵsanitizeUrl)(\"alt\", logiciel_r10.Title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.isSelected(logiciel_r10));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", logiciel_r10.Title, \" \");\n  }\n}\n\nfunction LogicielComponent_div_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, LogicielComponent_div_2_div_5_div_1_Template, 6, 6, \"div\", 18);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.allLogiciels);\n  }\n}\n\nfunction LogicielComponent_div_2_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"p\", 26);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u2713 \", ctx_r8.selectedLogiciels.length, \" logiciel(s) associ\\u00E9(s) \\u00E0 cette sous-formation \");\n  }\n}\n\nfunction LogicielComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"h3\", 9);\n    i0.ɵɵtext(2, \" S\\u00E9lectionner des logiciels existants \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, LogicielComponent_div_2_div_3_Template, 4, 0, \"div\", 10);\n    i0.ɵɵtemplate(4, LogicielComponent_div_2_div_4_Template, 3, 0, \"div\", 11);\n    i0.ɵɵtemplate(5, LogicielComponent_div_2_div_5_Template, 2, 1, \"div\", 12);\n    i0.ɵɵtemplate(6, LogicielComponent_div_2_div_6_Template, 3, 1, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading && ctx_r1.allLogiciels.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.loading && ctx_r1.allLogiciels.length > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.selectedLogiciels.length > 0);\n  }\n}\n\nfunction LogicielComponent_div_3_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 40)(1, \"p\", 41);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \\u2713 Image s\\u00E9lectionn\\u00E9e : \", ctx_r12.selectedImage.name, \" \");\n  }\n}\n\nfunction LogicielComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\", 28)(2, \"h3\", 29);\n    i0.ɵɵtext(3, \"Cr\\u00E9er un nouveau logiciel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 30)(5, \"label\", 31);\n    i0.ɵɵtext(6, \" Titre * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"input\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function LogicielComponent_div_3_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.newLogiciel.title = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"label\", 31);\n    i0.ɵɵtext(9, \" Description * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"textarea\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function LogicielComponent_div_3_Template_textarea_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.newLogiciel.description = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"label\", 31);\n    i0.ɵɵtext(12, \" Image * \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 34);\n    i0.ɵɵlistener(\"change\", function LogicielComponent_div_3_Template_input_change_13_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.onImageSelected($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, LogicielComponent_div_3_div_14_Template, 3, 1, \"div\", 35);\n    i0.ɵɵelementStart(15, \"div\", 36)(16, \"p\", 37);\n    i0.ɵɵtext(17, \" \\uD83D\\uDCA1 Ce logiciel sera automatiquement associ\\u00E9 \\u00E0 la sous-formation en cours \");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(18, \"div\", 38)(19, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function LogicielComponent_div_3_Template_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.createNewLogiciel());\n    });\n    i0.ɵɵelementStart(20, \"span\");\n    i0.ɵɵtext(21, \"\\u2713 Cr\\u00E9er le logiciel\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"button\", 39);\n    i0.ɵɵlistener(\"click\", function LogicielComponent_div_3_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.closeAddModal());\n    });\n    i0.ɵɵelementStart(23, \"span\");\n    i0.ɵɵtext(24, \"Annuler\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newLogiciel.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.newLogiciel.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedImage);\n  }\n}\n\nexport let LogicielComponent = /*#__PURE__*/(() => {\n  class LogicielComponent {\n    constructor(logicielService, partenaireService) {\n      this.logicielService = logicielService;\n      this.partenaireService = partenaireService;\n      this.logiciels = [];\n      this.selectedLogiciel = null;\n      this.newLogicielName = '';\n      this.selectedImage = null;\n      this.partenaires = [];\n    }\n\n    ngOnInit() {\n      this.loadLogiciels();\n      this.loadPartenaires();\n    }\n\n    loadLogiciels() {\n      if (!this.sousFormationId) return;\n      this.logicielService.getLogiciel().subscribe(res => {\n        this.logiciels = res;\n      });\n    }\n\n    loadPartenaires() {\n      this.partenaireService.getPartenaire().subscribe(res => {\n        this.partenaires = res;\n      });\n    }\n\n    onFileSelected(event) {\n      const file = event.target.files[0];\n      if (file) this.selectedImage = file;\n    }\n\n    addLogiciel() {\n      if (!this.newLogicielName) return alert(\"Nom du logiciel requis\");\n      const fd = new FormData();\n      fd.append('name', this.newLogicielName);\n      fd.append('sousFormationKeejobId', this.sousFormationId.toString());\n      if (this.selectedImage) fd.append('image', this.selectedImage, this.selectedImage.name);\n      this.logicielService.addLogiciel(fd).subscribe(res => {\n        this.logiciels.push(res); // ajouter à la liste existante\n\n        this.newLogicielName = '';\n        this.selectedImage = null;\n      });\n    }\n\n    selectLogiciel(logiciel) {\n      this.selectedLogiciel = logiciel;\n      console.log(\"Logiciel sélectionné:\", logiciel);\n    }\n\n  }\n\n  LogicielComponent.ɵfac = function LogicielComponent_Factory(t) {\n    return new (t || LogicielComponent)(i0.ɵɵdirectiveInject(i1.LogicielService), i0.ɵɵdirectiveInject(i2.PartenaireService));\n  };\n\n  LogicielComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LogicielComponent,\n    selectors: [[\"app-logiciel\"]],\n    inputs: {\n      sousFormationId: \"sousFormationId\"\n    },\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"logiciel-container\"], [\"class\", \"add-section\", \"style\", \"margin-bottom: 30px;\", 4, \"ngIf\"], [\"class\", \"selection-section\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"add-section\", 2, \"margin-bottom\", \"30px\"], [1, \"btn\", \"btn-blue\", 3, \"click\"], [\"fill\", \"none\", \"stroke\", \"currentColor\", \"viewBox\", \"0 0 24 24\", 2, \"width\", \"20px\", \"height\", \"20px\", \"margin-right\", \"8px\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"stroke-width\", \"2\", \"d\", \"M12 4v16m8-8H4\"], [1, \"selection-section\"], [2, \"margin-bottom\", \"20px\", \"font-size\", \"18px\", \"font-weight\", \"600\"], [\"class\", \"loader\", \"style\", \"text-align: center; padding: 40px;\", 4, \"ngIf\"], [\"class\", \"empty-state\", \"style\", \"text-align: center; padding: 40px; color: #666;\", 4, \"ngIf\"], [\"class\", \"logiciel-grid\", 4, \"ngIf\"], [\"class\", \"selection-summary\", \"style\", \"margin-top: 25px; padding: 15px; background: #e3f2fd; border-radius: 8px;\", 4, \"ngIf\"], [1, \"loader\", 2, \"text-align\", \"center\", \"padding\", \"40px\"], [1, \"spinner\"], [1, \"empty-state\", 2, \"text-align\", \"center\", \"padding\", \"40px\", \"color\", \"#666\"], [1, \"logiciel-grid\"], [\"class\", \"logiciel-item\", \"style\", \"cursor: pointer; transition: all 0.3s ease;\", 3, \"selected\", 4, \"ngFor\", \"ngForOf\"], [1, \"logiciel-item\", 2, \"cursor\", \"pointer\", \"transition\", \"all 0.3s ease\"], [1, \"logiciel-image-container\", 2, \"position\", \"relative\"], [2, \"width\", \"100%\", \"height\", \"150px\", \"object-fit\", \"cover\", \"border-radius\", \"8px\", 3, \"src\", \"alt\"], [\"class\", \"checkmark\", \"style\", \"position: absolute; top: 10px; right: 10px; \\n                      background: #4CAF50; color: white; \\n                      width: 30px; height: 30px; border-radius: 50%;\\n                      display: flex; align-items: center; justify-content: center;\\n                      font-weight: bold;\", 4, \"ngIf\"], [2, \"margin-top\", \"10px\", \"font-weight\", \"600\", \"text-align\", \"center\"], [1, \"checkmark\", 2, \"position\", \"absolute\", \"top\", \"10px\", \"right\", \"10px\", \"background\", \"#4CAF50\", \"color\", \"white\", \"width\", \"30px\", \"height\", \"30px\", \"border-radius\", \"50%\", \"display\", \"flex\", \"align-items\", \"center\", \"justify-content\", \"center\", \"font-weight\", \"bold\"], [1, \"selection-summary\", 2, \"margin-top\", \"25px\", \"padding\", \"15px\", \"background\", \"#e3f2fd\", \"border-radius\", \"8px\"], [2, \"margin\", \"0\", \"color\", \"#1976d2\", \"font-weight\", \"600\"], [1, \"modal\"], [1, \"modal-content-rectangle\", 2, \"max-width\", \"600px\"], [2, \"margin-bottom\", \"25px\"], [1, \"modal-body\", \"scrollable\"], [2, \"display\", \"block\", \"margin-bottom\", \"8px\", \"font-weight\", \"600\"], [\"type\", \"text\", \"placeholder\", \"Nom du logiciel (ex: Photoshop, Excel...)\", 1, \"form-input\", 2, \"width\", \"100%\", \"margin-bottom\", \"20px\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"4\", \"placeholder\", \"Description du logiciel et de ses fonctionnalit\\u00E9s\", 1, \"form-input\", 2, \"width\", \"100%\", \"margin-bottom\", \"20px\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-input\", 2, \"width\", \"100%\", \"margin-bottom\", \"10px\", 3, \"change\"], [\"class\", \"selected-file\", \"style\", \"padding: 10px; background: #e8f5e9; border-radius: 6px; margin-bottom: 20px;\", 4, \"ngIf\"], [2, \"padding\", \"12px\", \"background\", \"#fff3cd\", \"border-radius\", \"6px\", \"border-left\", \"4px solid #ffc107\"], [2, \"margin\", \"0\", \"font-size\", \"14px\", \"color\", \"#856404\"], [1, \"modal-actions\", 2, \"margin-top\", \"25px\", \"display\", \"flex\", \"gap\", \"10px\", \"justify-content\", \"flex-end\"], [1, \"btn\", \"btn-gray\", 3, \"click\"], [1, \"selected-file\", 2, \"padding\", \"10px\", \"background\", \"#e8f5e9\", \"border-radius\", \"6px\", \"margin-bottom\", \"20px\"], [2, \"margin\", \"0\", \"color\", \"#2e7d32\"]],\n    template: function LogicielComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, LogicielComponent_div_1_Template, 6, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, LogicielComponent_div_2_Template, 7, 4, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, LogicielComponent_div_3_Template, 25, 3, \"div\", 3);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showAddNew);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showSelection);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showAddModal);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel],\n    styles: [\".logiciel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:20px;gap:20px;margin-top:20px}.logiciel-item[_ngcontent-%COMP%]{border:3px solid transparent;border-radius:12px;padding:15px;background:#f8f9fa;transition:all .3s ease}.logiciel-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 20px #0000001a}.logiciel-item.selected[_ngcontent-%COMP%]{border-color:#4caf50;background:#e8f5e9;box-shadow:0 5px 20px #4caf504d}.spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto 15px}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\"]\n  });\n  return LogicielComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}