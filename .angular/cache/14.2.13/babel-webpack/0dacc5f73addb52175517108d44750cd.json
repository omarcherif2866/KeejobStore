{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nimport { FormationKeejob } from 'src/app/models/formation-keejob';\nlet SousFormationKeejobDetailsComponent = class SousFormationKeejobDetailsComponent {\n  constructor(formationService, route, sousFormationService) {\n    this.formationService = formationService;\n    this.route = route;\n    this.sousFormationService = sousFormationService;\n    this.visibleSousFormations = [];\n    this.allPartners = [];\n    this.visiblePartners = [];\n    this.currentIndexSous = 0; // index de la première sous-formation affichée\n\n    this.currentIndexPartners = 0;\n  }\n\n  ngOnInit() {\n    const formationId = this.route.snapshot.params['id'];\n    this.getFormationDetails(formationId);\n  }\n\n  getFormationDetails(formationId) {\n    this.formationService.getFormationKeejobById(formationId).subscribe(data => {\n      this.formation = new FormationKeejob(data.id, data.title, data.description, data.image, data.partenaires, data.sousFormations); // --- PARTENAIRES ---\n\n      this.allPartners = data.partenaires || [];\n      this.currentIndexPartners = 0;\n      this.updateVisiblePartners(); // --- SOUS-FORMATIONS ---\n\n      this.sousFormationService.getSousFormationKeejobByFormationKeejob(Number(formationId)).subscribe(sousFormations => {\n        this.sousFormations = sousFormations || [];\n        this.currentIndexSous = 0;\n        this.updateVisibleSousFormations();\n      });\n      console.log(\"Formation :\", this.formation);\n    });\n  } // ----- SOUS-FORMATIONS -----\n\n\n  updateVisibleSousFormations() {\n    const total = this.sousFormations.length;\n    this.visibleSousFormations = [];\n\n    for (let i = 0; i < 3; i++) {\n      const index = (this.currentIndexSous + i) % total;\n      if (total > 0) this.visibleSousFormations.push(this.sousFormations[index]);\n    }\n  }\n\n  updateVisiblePartners() {\n    const total = this.allPartners.length;\n    this.visiblePartners = [];\n\n    for (let i = 0; i < 4; i++) {\n      // 4 visibles\n      const index = (this.currentIndexPartners + i) % total;\n      if (total > 0) this.visiblePartners.push(this.allPartners[index]);\n    }\n  }\n\n  sanitizeImage(url) {\n    if (!url) return ''; // Cas où l'URL est en double\n\n    if (url.includes(\"https://res.cloudinary.com\") && url.split(\"https://res.cloudinary.com\").length > 2) {\n      const parts = url.split(\"https://res.cloudinary.com/daxkymr4t/image/upload/\");\n      return \"https://res.cloudinary.com/daxkymr4t/image/upload/\" + parts[parts.length - 1];\n    }\n\n    return url;\n  }\n\n  getCardClass(index) {\n    const classes = ['card-ref', 'card-pub', 'card-social', 'card-content'];\n    return classes[index % 4]; // répète les 4 classes pour chaque ligne\n  }\n\n  scrollRightSous() {\n    this.currentIndexSous = (this.currentIndexSous + 1) % this.sousFormations.length;\n    this.updateVisibleSousFormations();\n  }\n\n  scrollLeftSous() {\n    this.currentIndexSous = (this.currentIndexSous - 1 + this.sousFormations.length) % this.sousFormations.length;\n    this.updateVisibleSousFormations();\n  }\n\n  scrollRightPartners() {\n    this.currentIndexPartners = (this.currentIndexPartners + 1) % this.allPartners.length;\n    this.updateVisiblePartners();\n  }\n\n  scrollLeftPartners() {\n    this.currentIndexPartners = (this.currentIndexPartners - 1 + this.allPartners.length) % this.allPartners.length;\n    this.updateVisiblePartners();\n  }\n\n};\n\n__decorate([ViewChild('partnersCarousel', {\n  static: false\n})], SousFormationKeejobDetailsComponent.prototype, \"partnersCarousel\", void 0);\n\n__decorate([ViewChild('carouselSousContainer', {\n  static: false\n})], SousFormationKeejobDetailsComponent.prototype, \"carouselSousContainer\", void 0);\n\nSousFormationKeejobDetailsComponent = __decorate([Component({\n  selector: 'app-sous-formation-keejob-details',\n  templateUrl: './sous-formation-keejob-details.component.html',\n  styleUrls: ['./sous-formation-keejob-details.component.css']\n})], SousFormationKeejobDetailsComponent);\nexport { SousFormationKeejobDetailsComponent };","map":null,"metadata":{},"sourceType":"module"}