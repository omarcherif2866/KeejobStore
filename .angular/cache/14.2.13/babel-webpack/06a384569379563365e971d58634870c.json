{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ResetPasswordComponent = class ResetPasswordComponent {\n  constructor(authService, router, route) {\n    this.authService = authService;\n    this.router = router;\n    this.route = route;\n    this.userId = '';\n    this.newPassword = '';\n    this.confirmPassword = '';\n    this.loading = false;\n    this.errorMessage = '';\n    this.successMessage = '';\n    this.showPassword = false;\n  }\n\n  ngOnInit() {\n    // Récupérer l'userId depuis les paramètres de route\n    this.route.queryParams.subscribe(params => {\n      this.userId = params['userId'] || '';\n\n      if (!this.userId) {\n        this.router.navigate(['/forgot-password']);\n      }\n    });\n  }\n\n  onSubmit() {\n    this.errorMessage = ''; // Validations\n\n    if (!this.newPassword || !this.confirmPassword) {\n      this.errorMessage = 'Veuillez remplir tous les champs.';\n      return;\n    }\n\n    if (this.newPassword.length < 6) {\n      this.errorMessage = 'Le mot de passe doit contenir au moins 6 caractères.';\n      return;\n    }\n\n    if (this.newPassword !== this.confirmPassword) {\n      this.errorMessage = 'Les mots de passe ne correspondent pas.';\n      return;\n    }\n\n    this.loading = true;\n    this.successMessage = '';\n    this.authService.resetPassword(this.userId, this.newPassword).subscribe({\n      next: response => {\n        this.loading = false;\n        this.successMessage = response.message; // Rediriger vers la page de connexion\n\n        setTimeout(() => {\n          this.router.navigate(['/login']);\n        }, 2000);\n      },\n      error: error => {\n        var _a;\n\n        this.loading = false;\n        this.errorMessage = ((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Une erreur est survenue.';\n      }\n    });\n  }\n\n  togglePasswordVisibility() {\n    this.showPassword = !this.showPassword;\n  }\n\n};\nResetPasswordComponent = __decorate([Component({\n  selector: 'app-reset-password',\n  templateUrl: './reset-password.component.html',\n  styleUrls: ['./reset-password.component.css']\n})], ResetPasswordComponent);\nexport { ResetPasswordComponent };","map":null,"metadata":{},"sourceType":"module"}