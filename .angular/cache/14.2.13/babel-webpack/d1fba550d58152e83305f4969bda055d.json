{"ast":null,"code":"import { Actualite } from 'src/app/models/actualite';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/actualite.service\";\nexport let ActualiteComponent = /*#__PURE__*/(() => {\n  class ActualiteComponent {\n    constructor(actualiteService) {\n      this.actualiteService = actualiteService;\n      this.sidebarOpen = true;\n      this.actualites = [];\n      this.loading = false;\n      this.currentPage = 1;\n      this.itemsPerPage = 5;\n      this.showModal = false;\n      this.modalMode = 'add';\n      this.formData = {\n        id: null,\n        title: '',\n        description: '',\n        date: '',\n        heure: ''\n      };\n      this.editId = null;\n    }\n\n    ngOnInit() {\n      this.fetchActualites();\n    } // Récupérer les actualités depuis le backend\n\n\n    fetchActualites() {\n      this.loading = true;\n      this.actualiteService.getActualite().subscribe(response => {\n        this.actualites = response.map(item => new Actualite(item.Id, item.Date, item.Description, item.Heure, item.Title));\n        this.loading = false;\n      }, error => {\n        console.error('Erreur lors du chargement des actualités:', error);\n        this.loading = false;\n        alert('Erreur lors du chargement des données');\n      });\n    } // Pagination\n\n\n    get currentItems() {\n      const indexOfLastItem = this.currentPage * this.itemsPerPage;\n      const indexOfFirstItem = indexOfLastItem - this.itemsPerPage;\n      return this.actualites.slice(indexOfFirstItem, indexOfLastItem);\n    }\n\n    get totalPages() {\n      return Math.ceil(this.actualites.length / this.itemsPerPage);\n    }\n\n    get pagesArray() {\n      return Array(this.totalPages).fill(0).map((_, i) => i + 1);\n    }\n\n    handlePageChange(pageNumber) {\n      this.currentPage = pageNumber;\n    } // Ajouter une actualité\n\n\n    handleAdd() {\n      this.modalMode = 'add';\n      this.formData = {\n        id: null,\n        title: '',\n        description: '',\n        date: '',\n        heure: ''\n      };\n      this.showModal = true;\n    } // Éditer une actualité\n\n\n    handleEdit(actualite) {\n      this.modalMode = 'edit';\n      this.formData = {\n        id: actualite.Id,\n        title: actualite.Title,\n        description: actualite.Description,\n        date: actualite.Date,\n        heure: actualite.Heure\n      };\n      this.editId = actualite.Id;\n      this.showModal = true;\n    } // Supprimer une actualité\n\n\n    handleDelete(id) {\n      if (confirm('Êtes-vous sûr de vouloir supprimer cette actualité ?')) {\n        this.actualiteService.deleteActualite(id).subscribe(() => {\n          this.actualites = this.actualites.filter(item => item.Id !== id);\n          alert('Actualité supprimée avec succès');\n        }, error => {\n          console.error('Erreur lors de la suppression:', error);\n          alert('Erreur lors de la suppression');\n        });\n      }\n    } // Soumettre le formulaire\n\n\n    handleSubmit() {\n      if (!this.formData.title || !this.formData.description || !this.formData.date || !this.formData.heure) {\n        alert('Veuillez remplir tous les champs');\n        return;\n      }\n\n      const actualiteData = {\n        title: this.formData.title,\n        description: this.formData.description,\n        date: this.formData.date,\n        heure: this.formData.heure\n      };\n\n      if (this.modalMode === 'add') {\n        this.actualiteService.addActualite(actualiteData).subscribe(response => {\n          const newActualite = new Actualite(response.Id, response.Date, response.Description, response.Heure, response.Title);\n          this.actualites.push(newActualite);\n          this.showModal = false;\n          alert('Actualité ajoutée avec succès');\n        }, error => {\n          console.error('Erreur lors de l\\'ajout:', error);\n          alert('Erreur lors de l\\'ajout');\n        });\n      } else {\n        this.actualiteService.putActualite(this.editId, actualiteData).subscribe(response => {\n          const index = this.actualites.findIndex(item => item.Id === this.editId);\n\n          if (index !== -1) {\n            this.actualites[index] = new Actualite(response.Id, response.Date, response.Description, response.Heure, response.Title);\n          }\n\n          this.showModal = false;\n          alert('Actualité modifiée avec succès');\n        }, error => {\n          console.error('Erreur lors de la modification:', error);\n          alert('Erreur lors de la modification');\n        });\n      }\n    }\n\n    toggleSidebar() {\n      this.sidebarOpen = !this.sidebarOpen;\n    }\n\n  }\n\n  ActualiteComponent.ɵfac = function ActualiteComponent_Factory(t) {\n    return new (t || ActualiteComponent)(i0.ɵɵdirectiveInject(i1.ActualiteService));\n  };\n\n  ActualiteComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ActualiteComponent,\n    selectors: [[\"app-actualite\"]],\n    decls: 0,\n    vars: 0,\n    template: function ActualiteComponent_Template(rf, ctx) {}\n  });\n  return ActualiteComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}