{"ast":null,"code":"import { SousFormationKeejob } from 'src/app/models/sous-formation-keejob';\nimport { Partenaire } from 'src/app/models/partenaire';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/partenaire.service\";\nimport * as i2 from \"src/app/services/sous-formation-keejob.service\";\nimport * as i3 from \"src/app/services/logiciel.service\";\nimport * as i4 from \"src/app/services/auth.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\n\nfunction SousFormationKeejobComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 8);\n    i0.ÉµÉµelement(1, \"div\", 9);\n    i0.ÉµÉµelementStart(2, \"p\");\n    i0.ÉµÉµtext(3, \"Chargement des sous-formations...\");\n    i0.ÉµÉµelementEnd()();\n  }\n}\n\nfunction SousFormationKeejobComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 10)(1, \"p\");\n    i0.ÉµÉµtext(2, \"Aucune sous-formation disponible pour cette formation\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"p\", 11);\n    i0.ÉµÉµtext(4, \"Cliquez sur \\\"Ajouter une Sous-Formation\\\" pour commencer\");\n    i0.ÉµÉµelementEnd()();\n  }\n}\n\nfunction SousFormationKeejobComponent_div_9_tr_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"tr\")(1, \"td\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(3, \"td\");\n    i0.ÉµÉµelement(4, \"img\", 14);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(5, \"td\");\n    i0.ÉµÉµtext(6);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"td\");\n    i0.ÉµÉµtext(8);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(9, \"td\", 15)(10, \"button\", 16);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_9_tr_15_Template_button_click_10_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r8);\n      const sousFormation_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r7.handleEdit(sousFormation_r6));\n    });\n    i0.ÉµÉµnamespaceSVG();\n    i0.ÉµÉµelementStart(11, \"svg\", 17);\n    i0.ÉµÉµelement(12, \"path\", 18);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµnamespaceHTML();\n    i0.ÉµÉµelementStart(13, \"button\", 19);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_9_tr_15_Template_button_click_13_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r8);\n      const sousFormation_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r9.handleDelete(sousFormation_r6.Id));\n    });\n    i0.ÉµÉµnamespaceSVG();\n    i0.ÉµÉµelementStart(14, \"svg\", 17);\n    i0.ÉµÉµelement(15, \"path\", 20);\n    i0.ÉµÉµelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const sousFormation_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(sousFormation_r6.Id);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"src\", ctx_r5.sanitizeImage(sousFormation_r6.Image), i0.ÉµÉµsanitizeUrl)(\"alt\", sousFormation_r6.Title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(sousFormation_r6.Title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(sousFormation_r6.Description);\n  }\n}\n\nfunction SousFormationKeejobComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 12)(1, \"table\")(2, \"thead\")(3, \"tr\")(4, \"th\");\n    i0.ÉµÉµtext(5, \"ID\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(6, \"th\");\n    i0.ÉµÉµtext(7, \"Image\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"th\");\n    i0.ÉµÉµtext(9, \"Titre\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"th\");\n    i0.ÉµÉµtext(11, \"Description\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(12, \"th\");\n    i0.ÉµÉµtext(13, \"Actions\");\n    i0.ÉµÉµelementEnd()()();\n    i0.ÉµÉµelementStart(14, \"tbody\");\n    i0.ÉµÉµtemplate(15, SousFormationKeejobComponent_div_9_tr_15_Template, 16, 5, \"tr\", 13);\n    i0.ÉµÉµelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(15);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r2.currentItems);\n  }\n}\n\nfunction SousFormationKeejobComponent_div_10_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"button\", 24);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_10_button_3_Template_button_click_0_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r13);\n      const page_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r12.handlePageChange(page_r11));\n    });\n    i0.ÉµÉµtext(1);\n    i0.ÉµÉµelementEnd();\n  }\n\n  if (rf & 2) {\n    const page_r11 = ctx.$implicit;\n    const ctx_r10 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµclassProp(\"active\", ctx_r10.currentPage === page_r11);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµtextInterpolate1(\" \", page_r11, \" \");\n  }\n}\n\nfunction SousFormationKeejobComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"div\", 21)(1, \"button\", 22);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_10_Template_button_click_1_listener() {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r14 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r14.handlePageChange(ctx_r14.currentPage - 1));\n    });\n    i0.ÉµÉµtext(2, \"\\u25C0\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(3, SousFormationKeejobComponent_div_10_button_3_Template, 2, 3, \"button\", 23);\n    i0.ÉµÉµelementStart(4, \"button\", 22);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_10_Template_button_click_4_listener() {\n      i0.ÉµÉµrestoreView(_r15);\n      const ctx_r16 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r16.handlePageChange(ctx_r16.currentPage + 1));\n    });\n    i0.ÉµÉµtext(5, \"\\u25B6\");\n    i0.ÉµÉµelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r3.currentPage === 1);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r3.pagesArray);\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"disabled\", ctx_r3.currentPage === ctx_r3.totalPages);\n  }\n}\n\nfunction SousFormationKeejobComponent_div_11_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ÉµÉµelementStart(0, \"div\", 39)(1, \"p\");\n    i0.ÉµÉµtext(2);\n    i0.ÉµÉµelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate1(\"\\u2713 Image s\\u00E9lectionn\\u00E9e : \", ctx_r17.selectedImage.name, \"\");\n  }\n}\n\nfunction SousFormationKeejobComponent_div_11_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"div\", 40);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_11_div_18_Template_div_click_0_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r22);\n      const p_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r21.togglePartenaire(p_r20));\n    });\n    i0.ÉµÉµelement(1, \"img\", 41);\n    i0.ÉµÉµelementStart(2, \"p\");\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd()();\n  }\n\n  if (rf & 2) {\n    const p_r20 = ctx.$implicit;\n    const ctx_r18 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµclassProp(\"selected\", ctx_r18.isSelected(p_r20));\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"src\", ctx_r18.sanitizeImage(p_r20.Image), i0.ÉµÉµsanitizeUrl)(\"alt\", p_r20.Title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(p_r20.Title);\n  }\n}\n\nfunction SousFormationKeejobComponent_div_11_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"div\", 42);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_11_div_22_Template_div_click_0_listener() {\n      const restoredCtx = i0.ÉµÉµrestoreView(_r25);\n      const l_r23 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ÉµÉµnextContext(2);\n      return i0.ÉµÉµresetView(ctx_r24.toggleLogiciel(l_r23));\n    });\n    i0.ÉµÉµelement(1, \"img\", 41);\n    i0.ÉµÉµelementStart(2, \"p\");\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd()();\n  }\n\n  if (rf & 2) {\n    const l_r23 = ctx.$implicit;\n    const ctx_r19 = i0.ÉµÉµnextContext(2);\n    i0.ÉµÉµclassProp(\"selected\", ctx_r19.isLogicielSelected(l_r23));\n    i0.ÉµÉµadvance(1);\n    i0.ÉµÉµproperty(\"src\", ctx_r19.sanitizeImage(l_r23.Image), i0.ÉµÉµsanitizeUrl)(\"alt\", l_r23.Title);\n    i0.ÉµÉµadvance(2);\n    i0.ÉµÉµtextInterpolate(l_r23.Title);\n  }\n}\n\nfunction SousFormationKeejobComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ÉµÉµgetCurrentView();\n\n    i0.ÉµÉµelementStart(0, \"div\", 25)(1, \"div\", 26)(2, \"h3\");\n    i0.ÉµÉµtext(3);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(4, \"div\", 27)(5, \"label\");\n    i0.ÉµÉµtext(6, \"Titre *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(7, \"input\", 28);\n    i0.ÉµÉµlistener(\"ngModelChange\", function SousFormationKeejobComponent_div_11_Template_input_ngModelChange_7_listener($event) {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r26 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r26.formData.title = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(8, \"label\");\n    i0.ÉµÉµtext(9, \"Description *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(10, \"textarea\", 29);\n    i0.ÉµÉµlistener(\"ngModelChange\", function SousFormationKeejobComponent_div_11_Template_textarea_ngModelChange_10_listener($event) {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r28 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r28.formData.description = $event);\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(11, \"label\");\n    i0.ÉµÉµtext(12, \"Image *\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(13, \"input\", 30);\n    i0.ÉµÉµlistener(\"change\", function SousFormationKeejobComponent_div_11_Template_input_change_13_listener($event) {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r29 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r29.onImageSelected($event));\n    });\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµtemplate(14, SousFormationKeejobComponent_div_11_div_14_Template, 3, 1, \"div\", 31);\n    i0.ÉµÉµelementStart(15, \"label\");\n    i0.ÉµÉµtext(16, \"Partenaires\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(17, \"div\", 32);\n    i0.ÉµÉµtemplate(18, SousFormationKeejobComponent_div_11_div_18_Template, 4, 5, \"div\", 33);\n    i0.ÉµÉµelementEnd()();\n    i0.ÉµÉµelementStart(19, \"label\");\n    i0.ÉµÉµtext(20, \"Logiciels\");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(21, \"div\", 34);\n    i0.ÉµÉµtemplate(22, SousFormationKeejobComponent_div_11_div_22_Template, 4, 5, \"div\", 35);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(23, \"button\", 36);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_11_Template_button_click_23_listener() {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r30 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r30.openAddLogiciel());\n    });\n    i0.ÉµÉµtext(24, \" + Ajouter un logiciel \");\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(25, \"div\", 37)(26, \"button\", 2);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_11_Template_button_click_26_listener() {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r31 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r31.handleSubmit());\n    });\n    i0.ÉµÉµtext(27);\n    i0.ÉµÉµelementEnd();\n    i0.ÉµÉµelementStart(28, \"button\", 38);\n    i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_div_11_Template_button_click_28_listener() {\n      i0.ÉµÉµrestoreView(_r27);\n      const ctx_r32 = i0.ÉµÉµnextContext();\n      return i0.ÉµÉµresetView(ctx_r32.closeModal());\n    });\n    i0.ÉµÉµtext(29, \"Annuler\");\n    i0.ÉµÉµelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ÉµÉµnextContext();\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµtextInterpolate1(\"\", ctx_r4.modalMode === \"add\" ? \"Ajouter\" : \"Modifier\", \" une Sous-Formation\");\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r4.formData.title);\n    i0.ÉµÉµadvance(3);\n    i0.ÉµÉµproperty(\"ngModel\", ctx_r4.formData.description);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngIf\", ctx_r4.selectedImage);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r4.partenaires);\n    i0.ÉµÉµadvance(4);\n    i0.ÉµÉµproperty(\"ngForOf\", ctx_r4.logiciels);\n    i0.ÉµÉµadvance(5);\n    i0.ÉµÉµtextInterpolate1(\" \", ctx_r4.modalMode === \"add\" ? \"Ajouter\" : \"Modifier\", \" \");\n  }\n}\n\nexport let SousFormationKeejobComponent = /*#__PURE__*/(() => {\n  class SousFormationKeejobComponent {\n    constructor(partenaireservice, sousFormationKeejobService, logicielService, authService, router) {\n      this.partenaireservice = partenaireservice;\n      this.sousFormationKeejobService = sousFormationKeejobService;\n      this.logicielService = logicielService;\n      this.authService = authService;\n      this.router = router;\n      this.sidebarOpen = true;\n      this.sousFormationKeejob = [];\n      this.partenaires = [];\n      this.selectedPartenaires = [];\n      this.loading = false;\n      this.currentPage = 1;\n      this.itemsPerPage = 5;\n      this.showModal = false;\n      this.modalMode = 'add';\n      this.formData = {\n        id: null,\n        title: '',\n        description: '',\n        image: '',\n        formationKeejobId: null,\n        sousFormationPartenaires: []\n      };\n      this.editId = null;\n      this.selectedImage = null;\n      this.logiciels = [];\n      this.selectedLogiciels = [];\n    }\n\n    ngOnInit() {\n      console.log('ðŸš€ SousFormationKeejob - Initialisation');\n      console.log('ðŸ“Œ formationId reÃ§u:', this.formationId);\n      this.fetchsousFormationKeejob();\n      this.fetchPartenaires();\n      this.loadLogiciels(); // AJOUT\n    }\n\n    fetchsousFormationKeejob() {\n      this.loading = true;\n      console.log('ðŸ“¡ RÃ©cupÃ©ration des sous-formations...');\n      this.sousFormationKeejobService.getSousFormationKeejob().subscribe(response => {\n        console.log('âœ… RÃ©ponse brute:', response); // Filtrer par formationId si fourni\n\n        let filteredResponse = response;\n\n        if (this.formationId) {\n          filteredResponse = response.filter(sf => sf.formationKeejob && sf.formationKeejob.id === this.formationId);\n          console.log('ðŸ” Sous-formations filtrÃ©es:', filteredResponse);\n        }\n\n        this.sousFormationKeejob = filteredResponse.map(f => new SousFormationKeejob(f.id, f.title, f.description, f.image, f.sousFormationPartenaires || [], f.formationKeejob, f.sousFormationLogiciel || []));\n        this.loading = false;\n        console.log('âœ… Sous-formations mappÃ©es:', this.sousFormationKeejob);\n      }, error => {\n        console.error('âŒ Erreur chargement:', error);\n        this.loading = false;\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur lors du chargement',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      });\n    }\n\n    fetchPartenaires() {\n      this.partenaireservice.getPartenaire().subscribe(response => {\n        this.partenaires = response.map(p => new Partenaire(p.id, p.title, p.description, p.image));\n        console.log('âœ… Partenaires chargÃ©s:', this.partenaires.length);\n      }, error => {\n        console.error('âŒ Erreur partenaires:', error);\n      });\n    }\n\n    get currentItems() {\n      const indexOfLastItem = this.currentPage * this.itemsPerPage;\n      const indexOfFirstItem = indexOfLastItem - this.itemsPerPage;\n      return this.sousFormationKeejob.slice(indexOfFirstItem, indexOfLastItem);\n    }\n\n    get totalPages() {\n      return Math.ceil(this.sousFormationKeejob.length / this.itemsPerPage);\n    }\n\n    get pagesArray() {\n      return Array(this.totalPages).fill(0).map((_, i) => i + 1);\n    }\n\n    handlePageChange(pageNumber) {\n      this.currentPage = pageNumber;\n    }\n\n    handleAdd() {\n      this.modalMode = 'add';\n      this.formData = {\n        id: null,\n        title: '',\n        description: '',\n        image: '',\n        formationKeejobId: this.formationId,\n        sousFormationPartenaires: []\n      };\n      this.selectedPartenaires = [];\n      this.selectedImage = null;\n      this.showModal = true;\n    }\n\n    handleEdit(sousFormation) {\n      var _a;\n\n      this.modalMode = 'edit';\n      this.formData = {\n        id: sousFormation.Id,\n        title: sousFormation.Title,\n        description: sousFormation.Description,\n        image: sousFormation.Image,\n        formationKeejobId: ((_a = sousFormation.FormationKeejob) === null || _a === void 0 ? void 0 : _a.Id) || this.formationId,\n        sousFormationPartenaires: sousFormation.Partenaires || []\n      };\n      this.editId = sousFormation.Id;\n      this.showModal = true;\n    }\n\n    handleDelete(id) {\n      Swal.fire({\n        title: 'ÃŠtes-vous sÃ»r?',\n        text: \"Cette action est irrÃ©versible!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Oui, supprimer!',\n        cancelButtonText: 'Annuler'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.sousFormationKeejobService.deleteSousFormationKeejob(id).subscribe(() => {\n            this.sousFormationKeejob = this.sousFormationKeejob.filter(item => item.Id !== id);\n            Swal.fire({\n              title: 'SupprimÃ©!',\n              text: 'Sous-formation supprimÃ©e avec succÃ¨s',\n              icon: 'success',\n              timer: 1500,\n              showConfirmButton: false\n            });\n          }, error => {\n            console.error('Erreur suppression:', error);\n            Swal.fire({\n              icon: 'error',\n              title: 'Erreur lors de la suppression',\n              timer: 1500\n            });\n          });\n        }\n      });\n    }\n\n    handleSubmit() {\n      if (!this.formData.title || !this.formData.description) {\n        Swal.fire({\n          icon: 'warning',\n          title: 'Attention',\n          text: 'Veuillez remplir tous les champs obligatoires',\n          timer: 2000\n        });\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append('title', this.formData.title);\n      formData.append('description', this.formData.description); // Ajouter l'ID de la formation principale\n\n      if (this.formationId) {\n        formData.append('formationKeejobId', this.formationId.toString());\n      }\n\n      if (this.selectedImage) {\n        formData.append('image', this.selectedImage, this.selectedImage.name);\n      }\n\n      if (this.selectedLogiciels.length > 0) {\n        this.selectedLogiciels.forEach(p => {\n          formData.append(\"logicielIds\", p.id.toString());\n        });\n      }\n\n      if (this.selectedPartenaires.length > 0) {\n        this.selectedPartenaires.forEach(p => {\n          formData.append(\"partenairesIds\", p.id.toString());\n        });\n      }\n\n      if (this.modalMode === 'add') {\n        this.sousFormationKeejobService.addSousFormationKeejob(formData).subscribe(response => {\n          Swal.fire({\n            title: 'SuccÃ¨s!',\n            text: 'Sous-formation ajoutÃ©e avec succÃ¨s',\n            icon: 'success',\n            timer: 1500,\n            showConfirmButton: false\n          });\n          this.closeModal();\n          this.fetchsousFormationKeejob();\n        }, error => {\n          console.error('Erreur ajout:', error);\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur lors de l\\'ajout',\n            timer: 1500\n          });\n        });\n      } else {\n        this.sousFormationKeejobService.putSousFormationKeejob(this.editId, formData).subscribe(response => {\n          Swal.fire({\n            title: 'SuccÃ¨s!',\n            text: 'Sous-formation modifiÃ©e avec succÃ¨s',\n            icon: 'success',\n            timer: 1500,\n            showConfirmButton: false\n          });\n          this.closeModal();\n          this.fetchsousFormationKeejob();\n        }, error => {\n          console.error('Erreur modification:', error);\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur lors de la modification',\n            timer: 1500\n          });\n        });\n      }\n    }\n\n    closeModal() {\n      this.showModal = false;\n      this.formData = {\n        id: null,\n        title: '',\n        description: '',\n        image: '',\n        formationKeejobId: null,\n        sousFormationPartenaires: []\n      };\n      this.selectedPartenaires = [];\n      this.selectedImage = null;\n    }\n\n    onImageSelected(event) {\n      const file = event.target.files[0];\n\n      if (file) {\n        if (!file.type.startsWith('image/')) {\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur',\n            text: 'Veuillez sÃ©lectionner une image valide',\n            timer: 1500,\n            showConfirmButton: false\n          });\n          return;\n        }\n\n        if (file.size > 5 * 1024 * 1024) {\n          Swal.fire({\n            icon: 'error',\n            title: 'Erreur',\n            text: 'L\\'image ne doit pas dÃ©passer 5MB',\n            timer: 1500,\n            showConfirmButton: false\n          });\n          return;\n        }\n\n        this.selectedImage = file;\n      }\n    }\n\n    sanitizeImage(url) {\n      if (!url) return '';\n\n      if (url.includes(\"https://res.cloudinary.com\") && url.split(\"https://res.cloudinary.com\").length > 2) {\n        const parts = url.split(\"https://res.cloudinary.com/daxkymr4t/image/upload/\");\n        return \"https://res.cloudinary.com/daxkymr4t/image/upload/\" + parts[parts.length - 1];\n      }\n\n      return url;\n    }\n\n    togglePartenaire(p) {\n      const index = this.selectedPartenaires.findIndex(x => x.id === p.Id);\n\n      if (index >= 0) {\n        this.selectedPartenaires.splice(index, 1);\n      } else {\n        this.selectedPartenaires.push({\n          id: p.Id,\n          title: p.Name,\n          image: p.Image\n        });\n      }\n    }\n\n    isSelected(p) {\n      return this.selectedPartenaires.some(x => x.id === p.Id);\n    }\n\n    loadLogiciels() {\n      this.logicielService.getAllLogiciels().subscribe(res => {\n        this.logiciels = res;\n      }, err => console.error(err));\n    }\n\n    isLogicielSelected(l) {\n      return this.selectedLogiciels.some(x => x.id === l.id);\n    }\n\n    toggleLogiciel(l) {\n      if (this.isLogicielSelected(l)) {\n        this.selectedLogiciels = this.selectedLogiciels.filter(x => x.id !== l.id);\n      } else {\n        this.selectedLogiciels.push(l);\n      }\n    }\n\n    openAddLogiciel() {\n      this.router.navigate(['/logiciels/add']);\n    }\n\n  }\n\n  SousFormationKeejobComponent.Éµfac = function SousFormationKeejobComponent_Factory(t) {\n    return new (t || SousFormationKeejobComponent)(i0.ÉµÉµdirectiveInject(i1.PartenaireService), i0.ÉµÉµdirectiveInject(i2.SousFormationKeejobService), i0.ÉµÉµdirectiveInject(i3.LogicielService), i0.ÉµÉµdirectiveInject(i4.AuthService), i0.ÉµÉµdirectiveInject(i5.Router));\n  };\n\n  SousFormationKeejobComponent.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n    type: SousFormationKeejobComponent,\n    selectors: [[\"app-sous-formation-keejob\"]],\n    inputs: {\n      formationId: \"formationId\"\n    },\n    decls: 12,\n    vars: 5,\n    consts: [[1, \"content-box\"], [1, \"header-actions\"], [1, \"btn\", \"btn-blue\", 3, \"click\"], [\"class\", \"loader\", 4, \"ngIf\"], [\"class\", \"empty-state\", 4, \"ngIf\"], [\"class\", \"table-container\", 4, \"ngIf\"], [\"class\", \"pagination\", 4, \"ngIf\"], [\"class\", \"modal\", 4, \"ngIf\"], [1, \"loader\"], [1, \"spinner\"], [1, \"empty-state\"], [2, \"font-size\", \"14px\", \"color\", \"#666\"], [1, \"table-container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ev-image\", 3, \"src\", \"alt\"], [1, \"actions\"], [\"title\", \"Modifier la sous-formation\", 1, \"action-btn\", \"edit-btn\", 3, \"click\"], [\"width\", \"16\", \"height\", \"16\", \"fill\", \"none\", \"stroke\", \"currentColor\", \"stroke-width\", \"2\", \"viewBox\", \"0 0 24 24\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"], [\"title\", \"Supprimer la sous-formation\", 1, \"action-btn\", \"delete-btn\", 3, \"click\"], [\"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", \"d\", \"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"], [1, \"pagination\"], [3, \"disabled\", \"click\"], [3, \"active\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"modal\"], [1, \"modal-content-rectangle\"], [1, \"modal-body\", \"scrollable\"], [\"type\", \"text\", \"placeholder\", \"Entrez le titre\", 1, \"form-input\", 3, \"ngModel\", \"ngModelChange\"], [\"rows\", \"4\", \"placeholder\", \"Entrez la description\", 1, \"form-input\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-input\", 3, \"change\"], [\"class\", \"selected-file\", 4, \"ngIf\"], [1, \"partenaire-grid\"], [\"class\", \"partenaire-item\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"logiciel-grid\"], [\"class\", \"logiciel-item\", 3, \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-blue\", \"small-btn\", 3, \"click\"], [1, \"modal-actions\"], [1, \"btn\", \"btn-gray\", 3, \"click\"], [1, \"selected-file\"], [1, \"partenaire-item\", 3, \"click\"], [3, \"src\", \"alt\"], [1, \"logiciel-item\", 3, \"click\"]],\n    template: function SousFormationKeejobComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ÉµÉµelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ÉµÉµtext(3, \"Liste des Sous-Formations\");\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµelementStart(4, \"button\", 2);\n        i0.ÉµÉµlistener(\"click\", function SousFormationKeejobComponent_Template_button_click_4_listener() {\n          return ctx.handleAdd();\n        });\n        i0.ÉµÉµelementStart(5, \"span\");\n        i0.ÉµÉµtext(6, \"Ajouter une Sous-Formation\");\n        i0.ÉµÉµelementEnd()()();\n        i0.ÉµÉµtemplate(7, SousFormationKeejobComponent_div_7_Template, 4, 0, \"div\", 3);\n        i0.ÉµÉµtemplate(8, SousFormationKeejobComponent_div_8_Template, 5, 0, \"div\", 4);\n        i0.ÉµÉµtemplate(9, SousFormationKeejobComponent_div_9_Template, 16, 1, \"div\", 5);\n        i0.ÉµÉµtemplate(10, SousFormationKeejobComponent_div_10_Template, 6, 3, \"div\", 6);\n        i0.ÉµÉµelementEnd();\n        i0.ÉµÉµtemplate(11, SousFormationKeejobComponent_div_11_Template, 30, 7, \"div\", 7);\n      }\n\n      if (rf & 2) {\n        i0.ÉµÉµadvance(7);\n        i0.ÉµÉµproperty(\"ngIf\", ctx.loading);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"ngIf\", !ctx.loading && ctx.sousFormationKeejob.length === 0);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"ngIf\", !ctx.loading && ctx.sousFormationKeejob.length > 0);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"ngIf\", !ctx.loading && ctx.sousFormationKeejob.length > 0);\n        i0.ÉµÉµadvance(1);\n        i0.ÉµÉµproperty(\"ngIf\", ctx.showModal);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel],\n    styles: [\".app-container[_ngcontent-%COMP%]{display:flex;height:100vh;background-color:#f3f4f6;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.sidebar[_ngcontent-%COMP%]{width:0;background-color:#111827;color:#fff;overflow:hidden;transition:width .3s}.sidebar.open[_ngcontent-%COMP%]{width:250px}.sidebar-content[_ngcontent-%COMP%]{padding:24px}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:2.5rem}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 15px;margin-bottom:5px;border-radius:8px;text-decoration:none;color:#d1d5db;transition:background .3s,color .3s}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#1f2937;color:#fff}.icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:10px}.main-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:24px;background-color:#fff;box-shadow:0 2px 4px #0000001a;position:sticky;top:0;z-index:10}header[_ngcontent-%COMP%]   .sidebar-toggle[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer}header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1f2937}.spacer[_ngcontent-%COMP%]{width:40px}.content-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 4px 8px #0000000d;padding:32px}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-actions[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1f2937}.btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:6px;border:none;cursor:pointer;font-size:14px;transition:all .3s}.btn-blue[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff}.btn-blue[_ngcontent-%COMP%]:hover{background-color:#1e40af}.btn-gray[_ngcontent-%COMP%]{background-color:#e5e7eb;color:#1f2937}.btn-gray[_ngcontent-%COMP%]:hover{background-color:#d1d5db}.btn-icon[_ngcontent-%COMP%]{border:none;background:none;cursor:pointer;font-size:16px}.loader[_ngcontent-%COMP%]{text-align:center;padding:48px 0}.spinner[_ngcontent-%COMP%]{display:inline-block;width:40px;height:40px;border:4px solid #2563eb;border-bottom-color:transparent;border-radius:50%;animation:spin 1s linear infinite;margin-bottom:12px}@keyframes spin{to{transform:rotate(360deg)}}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#9ca3af;font-size:16px;padding:48px 0}.table-container[_ngcontent-%COMP%]{overflow-x:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}thead[_ngcontent-%COMP%]{background-color:#f9fafb}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;text-align:left;font-size:14px;border-bottom:1px solid #e5e7eb}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:6px;border:none;border-radius:6px;cursor:pointer;transition:all .2s ease}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.edit-btn[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff}.edit-btn[_ngcontent-%COMP%]:hover{background-color:#2563eb}.delete-btn[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.pagination[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin-top:24px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 12px;margin-left:4px;border-radius:6px;border:1px solid #d1d5db;background-color:#fff;cursor:pointer}.pagination[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;border:none}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:50}.modal-content-rectangle[_ngcontent-%COMP%]{width:80vw;max-width:1000px;height:75vh;background:white;border-radius:10px;padding:20px;display:flex;flex-direction:column}.modal-body.scrollable[_ngcontent-%COMP%]{overflow-y:auto;padding-right:10px;max-height:70vh}.modal-content-rectangle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .modal-content-rectangle[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:6px;border:1px solid #d1d5db;margin-bottom:16px}.modal-content-rectangle[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .modal-content-rectangle[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#2563eb;box-shadow:0 0 0 2px #2563eb4d}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:16px}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}a[_ngcontent-%COMP%]{cursor:pointer}.ev-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:cover;object-fit:cover;border-radius:50%;transition:transform .2s ease;display:block}.ev-image[_ngcontent-%COMP%]:hover{transform:scale(1.1);cursor:pointer}.partenaire-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));grid-gap:12px;gap:12px;margin:10px 0}.partenaire-item[_ngcontent-%COMP%]{padding:8px;border:2px solid #ccc;border-radius:10px;text-align:center;cursor:pointer;transition:.2s}.partenaire-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:80px;-o-object-fit:contain;object-fit:contain}.partenaire-item.selected[_ngcontent-%COMP%]{border-color:#007bff;background:#e5f1ff}.container-formulaire[_ngcontent-%COMP%]{max-height:90vh;overflow-y:auto;padding-right:10px}.landscape[_ngcontent-%COMP%]{width:100vh;height:100vw;transform:rotate(90deg);transform-origin:left top;position:absolute;top:0;left:0}\"]\n  });\n  return SousFormationKeejobComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}