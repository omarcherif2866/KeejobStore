{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet FormateurComponent = class FormateurComponent {\n  constructor(actualiteService) {\n    this.actualiteService = actualiteService;\n    this.sidebarOpen = true;\n    this.actualites = [];\n    this.loading = false;\n    this.currentPage = 1;\n    this.itemsPerPage = 5;\n    this.showModal = false;\n    this.modalMode = 'add';\n    this.formData = {\n      id: null,\n      title: '',\n      description: '',\n      date: '',\n      heure: ''\n    };\n    this.editId = null;\n  }\n\n  ngOnInit() {\n    this.fetchActualites();\n  } // Récupérer les actualités depuis le backend\n\n\n  fetchActualites() {\n    this.loading = true;\n    this.actualiteService.getActualite().subscribe(response => {\n      this.actualites = response.map(item => new Actualite(item.Id, item.Title, item.Description, item.Date, item.Heure));\n      this.loading = false;\n    }, error => {\n      console.error('Erreur lors du chargement des actualités:', error);\n      this.loading = false;\n      Swal.fire({\n        icon: 'error',\n        title: 'Erreur lors du chargement des données',\n        showConfirmButton: false,\n        timer: 1500\n      });\n    });\n  } // Pagination\n\n\n  get currentItems() {\n    const indexOfLastItem = this.currentPage * this.itemsPerPage;\n    const indexOfFirstItem = indexOfLastItem - this.itemsPerPage;\n    return this.actualites.slice(indexOfFirstItem, indexOfLastItem);\n  }\n\n  get totalPages() {\n    return Math.ceil(this.actualites.length / this.itemsPerPage);\n  }\n\n  get pagesArray() {\n    return Array(this.totalPages).fill(0).map((_, i) => i + 1);\n  }\n\n  handlePageChange(pageNumber) {\n    this.currentPage = pageNumber;\n  } // Ajouter une actualité\n\n\n  handleAdd() {\n    this.modalMode = 'add';\n    this.formData = {\n      id: null,\n      title: '',\n      description: '',\n      date: '',\n      heure: ''\n    };\n    this.showModal = true;\n  } // Éditer une actualité\n\n\n  handleEdit(actualite) {\n    this.modalMode = 'edit';\n    this.formData = {\n      id: actualite.Id,\n      title: actualite.Title,\n      description: actualite.Description,\n      date: actualite.Date,\n      heure: actualite.Heure\n    };\n    this.editId = actualite.Id;\n    this.showModal = true;\n  } // Supprimer une actualité\n\n\n  handleDelete(id) {\n    if (confirm('Êtes-vous sûr de vouloir supprimer cette actualité ?')) {\n      this.actualiteService.deleteActualite(id).subscribe(() => {\n        this.actualites = this.actualites.filter(item => item.Id !== id);\n        Swal.fire({\n          title: 'Success!',\n          text: 'Actualité supprimée avec succès',\n          icon: 'success',\n          confirmButtonText: 'OK',\n          timer: 1500\n        }).then(() => {\n          window.location.reload();\n        });\n      }, error => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur lors de la suppression',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      });\n    }\n  } // Soumettre le formulaire\n\n\n  handleSubmit() {\n    if (!this.formData.title || !this.formData.description || !this.formData.date || !this.formData.heure) {\n      alert('Veuillez remplir tous les champs');\n      return;\n    }\n\n    const actualiteData = {\n      title: this.formData.title,\n      description: this.formData.description,\n      date: this.formData.date,\n      heure: this.formData.heure\n    };\n\n    if (this.modalMode === 'add') {\n      this.actualiteService.addActualite(actualiteData).subscribe(response => {\n        const newActualite = new Actualite(response.Id, response.Date, response.Description, response.Heure, response.Title);\n        this.actualites.push(newActualite);\n        this.showModal = false;\n        Swal.fire({\n          title: 'Success!',\n          text: 'Actualité ajoutée avec succès',\n          icon: 'success',\n          timer: 1500,\n          showConfirmButton: false\n        }).then(() => {\n          window.location.reload();\n        });\n      }, error => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur lors de l\\'ajout',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      });\n    } else {\n      this.actualiteService.putActualite(this.editId, actualiteData).subscribe(response => {\n        const index = this.actualites.findIndex(item => item.Id === this.editId);\n\n        if (index !== -1) {\n          this.actualites[index] = new Actualite(response.Id, response.Date, response.Description, response.Heure, response.Title);\n        }\n\n        this.showModal = false;\n        Swal.fire({\n          title: 'Success!',\n          text: 'Actualité modifiée avec succès',\n          icon: 'success',\n          timer: 1500,\n          showConfirmButton: false\n        }).then(() => {\n          window.location.reload();\n        });\n      }, error => {\n        Swal.fire({\n          icon: 'error',\n          title: 'Erreur lors de la modification',\n          showConfirmButton: false,\n          timer: 1500\n        });\n      });\n    }\n  }\n\n  toggleSidebar() {\n    this.sidebarOpen = !this.sidebarOpen;\n  }\n\n};\nFormateurComponent = __decorate([Component({\n  selector: 'app-formateur',\n  templateUrl: './formateur.component.html',\n  styleUrls: ['./formateur.component.css']\n})], FormateurComponent);\nexport { FormateurComponent };","map":null,"metadata":{},"sourceType":"module"}